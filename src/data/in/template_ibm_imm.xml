<?xml version="1.0" encoding="UTF-8"?>
<tns:root xmlns:tns="http://www.example.org/zbx_template_new/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.example.org/zbx_template_new/ ../../main/resources/templates/metrics.xsd ">
  <template>
  	  <classes>
  	  	<class>Fault</class>
  	  	<class>Inventory</class>
  	  </classes>
	  <name>Template IBM IMM</name>
	  <description>Template IBM IMM</description>
	  <sysObjectID>.1.3.6.1.4.1.8072.3.2.10</sysObjectID>
	  
	  <discoveryRules>
	  	<discoveryRule>
			<name>Temperature Discovery</name>
                <snmp_oid>discovery[{#SNMPVALUE},1.3.6.1.4.1.2.3.51.3.1.1.2.1.2]</snmp_oid>
                <key>tempDescr.discovery</key>
                <description>Scanning IMM-MIB::tempTable</description>
		</discoveryRule>
	  </discoveryRules>
	  
	  <metrics>
	  	<temperatureValue>
	    	  <oid>.1.3.6.1.4.1.2.3.51.3.1.1.2.1.3.{#SNMPINDEX}</oid>
		      <snmpObject>tempReading[{#SNMPVALUE}]</snmpObject>
		      <mib>IMM-MIB</mib>
		      <discoveryRule>Temperature Discovery</discoveryRule>
		      <metricLocation>{#SNMPVALUE}</metricLocation>
	    </temperatureValue>
	  
	    <overallStatus>
	      <oid>.1.3.6.1.4.1.2.3.51.3.1.4.1.0</oid>
	      <snmpObject>systemHealthStat.0</snmpObject>
	      <mib>IMM-MIB</mib>
	      <vendorDescription>IMM-MIB  Indicates status of system health for the system in which the IMM resides. Value of 'nonRecoverable' indicates a severe error has occurred and the system may not be functioning. A value of 'critical' indicates that a error has occurred but the system is currently functioning properly. A value of 'nonCritical' indicates that a condition has occurred that may change the state of the system in the future but currently the system is working properly. A value of 'normal' indicates that the system is operating normally.</vendorDescription>
	      <valueMap>IMM-MIB::systemHealthStat</valueMap>
	    </overallStatus>
	    
	    <hwModel>
	       <oid>.1.3.6.1.4.1.2.3.51.3.1.5.2.1.5.0</oid>
	       <snmpObject>machineLevelProductName</snmpObject>
   	      <mib>IMM-MIB</mib>
	    </hwModel>
	    
	   </metrics>
	   
	   
	    <macros>
                <macro>
                    <macro>{$HEALTH_CRIT_STATUS}</macro>
                    <value>2</value>
                </macro>
                <macro>
                    <macro>{$HEALTH_DISASTER_STATUS}</macro>
                    <value>0</value>
                </macro>
                <macro>
                    <macro>{$HEALTH_WARN_STATUS}</macro>
                    <value>4</value>
                </macro>
                <macro>
                    <macro>{$TEMP_CRIT:"Ambient Temp"}</macro>
                    <value>35</value>
                </macro>
                
                <macro>
                    <macro>{$TEMP_WARN:"Ambient Temp"}</macro>
                    <value>30</value>
                </macro>

            </macros>
  </template>
  
  
    <value_maps>
        <value_map>
            <name>IMM-MIB::systemHealthStat</name>
            <mappings>
                <mapping>
                    <value>0</value>
                    <newvalue>nonRecoverable</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>critical</newvalue>
                </mapping>
                <mapping>
                    <value>4</value>
                    <newvalue>nonCritical</newvalue>
                </mapping>
                <mapping>
                    <value>255</value>
                    <newvalue>normal</newvalue>
                </mapping>
            </mappings>
        </value_map>
    </value_maps>
  </tns:root>
